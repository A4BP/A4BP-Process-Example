<process xmlns="http://schemas.xmlsoap.org/ws/2003/03/business-process/" xmlns:client="http://www.globalcompany.example.com/ns/OrderBookingService" xmlns:ora="http://schemas.oracle.com/xpath/extension" xmlns:orcl="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.ExtFunc" xmlns:xp20="http://www.oracle.com/XSL/Transform/java/oracle.tip.pc.services.functions.Xpath20" xmlns:ldap="http://schemas.oracle.com/xpath/extension/ldap" xmlns:bpelx="http://schemas.oracle.com/bpel/extension" xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/" xmlns:ns1="http://www.globalcompany.example.com/ns/InternalWarehouse" xmlns:ns2="http://www.globalcompany.example.com/ns/CreditAuthorizationService" xmlns:ns3="www.globalcompany.example.com" xmlns:ns4="/oracle/fodemo/storefront/store/queries/common/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:dvm="http://www.oracle.com/XSL/Transform/java/oracle.tip.dvm.LookupValue" xmlns:hwf="http://xmlns.oracle.com/bpel/workflow/xpath" xmlns:mhdr="http://www.oracle.com/XSL/Transform/java/oracle.tip.mediator.service.common.functions.GetRequestHeaderExtnFunction" xmlns:med="http://schemas.oracle.com/mediator/xpath" xmlns:ids="http://xmlns.oracle.com/bpel/services/IdentityService/xpath" xmlns:xdk="http://schemas.oracle.com/bpel/extension/xpath/function/xdk" xmlns:xref="http://www.oracle.com/XSL/Transform/java/oracle.tip.xref.xpath.XRefXPathFunctions" xmlns:ns5="http://www.globalcompany.example.com/ns/OrderProcessor" xmlns:ns6="www.globalcompany.example.com/types/" xmlns:ns7="http://xmlns.oracle.com/adf/svc/types/" xmlns:ns8="http://www.globalcompany.example.com/ns/CCAuthorizationService" xmlns:ns9="www.globalcompany.example.com/ns/OrderProcessor" xmlns:ns10="http://www.globalcompany.example.com/ns/OrderBookingService/rules" xmlns:ns11="http://xmlns.oracle.com/RequiresApprovalRule/OracleRules1_DecisionService_1" xmlns:ns12="http://xmlns.oracle.com/bpel" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wf="http://schemas.oracle.com/bpel/extension/workflow" xmlns:ns13="http://xmlns.oracle.com/bpel/workflow/common/tsc" xmlns:ns14="http://xmlns.oracle.com/bpel/workflow/TaskEvidenceService" xmlns:ns15="http://xmlns.oracle.com/WebLogicFusionOrderDemo/OrderBookingComposite/PartnerSupplierMediator" xmlns:ns16="http://www.globalcompany.com/ns/OrderBooking" xmlns:ns17="http://xmlns.oracle.com/WebLogicFusionOrderDemo/OrderBookingComposite/FulfillOrder" xmlns:ns18="http://xmlns.oracle.com/ias/pcbpel/NotificationService" xmlns:ns19="http://xmlns.oracle.com/EvaluatePreferredSupplierRule/OracleRules1_DecisionService_1" xmlns:ns20="http://www.oracle.com/XSL/Transform/java/oracle.tip.adapter.socket.ProtocolTranslator" xmlns:task="http://xmlns.oracle.com/bpel/workflow/task" xmlns:taskservice="http://xmlns.oracle.com/bpel/workflow/taskService" xmlns:wfcommon="http://xmlns.oracle.com/bpel/workflow/common" xmlns:a4bp="http://a4bp.com/instrumentationService" name="OrderProcessor" targetNamespace="http://www.globalcompany.example.com/ns/OrderBookingService" queryLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116" expressionLanguage="http://www.w3.org/TR/1999/REC-xpath-19991116" suppressJoinFailure="no" enableInstanceCompensation="no" abstractProcess="no"><import location="a4bpInstrumentation.wsdl" namespace="http://a4bp.com/instrumentationService" importType="http://schemas.xmlsoap.org/wsdl/" /><partnerLinks><partnerLink name="orderprocessor_client_ep" partnerLinkType="client:OrderProcessor" myRole="OrderProcessorProvider" partnerRole="OrderProcessorRequester" /><partnerLink myRole="InternalWarehouseServiceRequester" name="InternalWarehouseService" partnerRole="InternalWarehouseServiceProvider" partnerLinkType="ns1:InternalWarehouseService" /><partnerLink name="CreditCardAuthorizationService" partnerRole="CreditAuthorizationPort" partnerLinkType="ns2:CreditCardAuthorizationService" /><partnerLink name="StoreFrontService" partnerRole="StoreFrontService" partnerLinkType="ns3:StorefrontService" /><partnerLink myRole="TaskServiceCallbackListener" name="TaskService" partnerRole="TaskService" partnerLinkType="taskservice:TaskService" /><partnerLink name="PartnerSupplierMediator" myRole="callback_ptt" partnerRole="execute_ptt" partnerLinkType="ns15:PartnerSupplierMediator.PartnerSupplierMediator" /><partnerLink name="NotificationService_WSDL" partnerLinkType="ns18:NotificationServiceLink" partnerRole="NotificationServiceProvider" /><partnerLink name="RequiresApprovalRule_OracleRules1_DecisionService_1" partnerLinkType="ns11:IDecisionService_PL" partnerRole="IDecisionService_Role" /><partnerLink name="FulfillOrder.FulfillOrder" partnerRole="execute_ptt" partnerLinkType="ns17:FulfillOrder.FulfillOrder" /><partnerLink name="EvaluatePreferredSupplierRule.OracleRules1_DecisionService_1" partnerRole="IDecisionService_Role" partnerLinkType="ns19:IDecisionService_PL" /><partnerLink name="a4bpIntegration" partnerLinkType="a4bp:A4bpInstrServicePortType" partnerRole="A4bpInstrServicePartnerRole" initializePartnerRole="no" /></partnerLinks><variables><variable name="inputVariable" messageType="client:OrderProcessorRequestMessage" /><variable name="outputVariable" messageType="client:OrderProcessorResponseMessage" /><variable name="ApprovalHumanTask_1_globalVariable" messageType="taskservice:taskMessage" /><variable name="gOrderInfoVariable" element="ns4:orderInfoVOSDO" bpelx:entity.si="StoreFrontService" /><variable name="gCustomerInfoVariable" messageType="ns3:StoreFrontService_findCustomerInfoVO1CustomerInfoVOCriteriaResponse" /><variable name="gWarehouseQuotes" element="ns1:WarehouseList" /><variable name="gPreferredSupplier" element="ns1:WarehouseResponse" /><variable name="gOrderProcessorFaultVariable" messageType="client:OrderProcessorFault" /><variable name="a4bpInInstrumentation" messageType="a4bp:a4bpRequest" /><variable name="a4bpOutInstrumentation" messageType="a4bp:a4bpResponse" /></variables><sequence name="main"><receive name="receiveInput" partnerLink="orderprocessor_client_ep" portType="client:OrderProcessor" operation="process" variable="inputVariable" createInstance="yes" /><assign validate="no" name="InitializeA4BPVariables"><copy><from><literal><ns:a4bpRes xmlns:ns="http://a4bp.com/instrumentationService"><ns:return>ns:return</ns:return></ns:a4bpRes></literal></from><to variable="a4bpOutInstrumentation" part="parameters" /></copy><copy><from><literal><ns:a4bpReq xmlns:ns="http://a4bp.com/instrumentationService"><ns:request>ns:request</ns:request></ns:a4bpReq></literal></from><to variable="a4bpInInstrumentation" part="parameters" /></copy></assign><assign name="a4bpAfterreceiveInput"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/receive&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokereceiveInput" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeScope_RetrieveOrder"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_RetrieveOrder" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><scope name="Scope_RetrieveOrder" /><assign name="a4bpAfterScope_RetrieveOrder"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_RetrieveOrder" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeScope_RetrieveCustomerForOrder"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_RetrieveCustomerForOrder" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><scope name="Scope_RetrieveCustomerForOrder"><assign name="a4bpBefore"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvoke" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><sequence><assign name="a4bpBeforeAssignCustomerId"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeAssignCustomerId" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="AssignCustomerId"><copy><from variable="gOrderInfoVariable" query="/ns4:orderInfoVOSDO/ns4:CustomerId" /><to variable="lFindCustomerInfo_InputVariable" part="parameters" query="/ns6:findCustomerInfoVO1CustomerInfoVOCriteria/ns6:CustId" /></copy><copy><from expression="-1" /><to variable="lFindCustomerInfo_InputVariable" part="parameters" query="/ns6:findCustomerInfoVO1CustomerInfoVOCriteria/ns6:findCriteria/ns7:fetchStart" /></copy><copy><from expression="1" /><to variable="lFindCustomerInfo_InputVariable" part="parameters" query="/ns6:findCustomerInfoVO1CustomerInfoVOCriteria/ns6:findCriteria/ns7:fetchSize" /></copy><copy><from expression="false()" /><to variable="lFindCustomerInfo_InputVariable" part="parameters" query="/ns6:findCustomerInfoVO1CustomerInfoVOCriteria/ns6:findCriteria/ns7:excludeAttribute" /></copy><copy><from expression="false()" /><to variable="lFindCustomerInfo_InputVariable" part="parameters" query="/ns6:findCustomerInfoVO1CustomerInfoVOCriteria/ns6:findControl/ns7:retrieveAllTranslations" /></copy></assign><assign name="a4bpAfterAssignCustomerId"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeAssignCustomerId" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeInvokeFindCustomer"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/invoke&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeInvokeFindCustomer" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><invoke name="InvokeFindCustomer" inputVariable="lFindCustomerInfo_InputVariable" outputVariable="gCustomerInfoVariable" partnerLink="StoreFrontService" portType="ns3:StoreFrontService" operation="findCustomerInfoVO1CustomerInfoVOCriteria" /><assign name="a4bpAfterInvokeFindCustomer"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/invoke&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeInvokeFindCustomer" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></sequence><assign name="a4bpAfter"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvoke" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></scope><assign name="a4bpAfterScope_RetrieveCustomerForOrder"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_RetrieveCustomerForOrder" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeScope_AuthorizeCreditCard"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_AuthorizeCreditCard" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><scope name="Scope_AuthorizeCreditCard"><assign name="a4bpBefore"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvoke" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><sequence><assign name="a4bpBeforeAssign_CreditCheckInput"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeAssign_CreditCheckInput" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="Assign_CreditCheckInput"><copy><from variable="gOrderInfoVariable" query="/ns4:orderInfoVOSDO/ns4:OrderTotal" /><to variable="lCreditCardInput" part="Authorization" query="/ns8:AuthInformation/ns8:PurchaseAmount" /></copy><copy><from variable="gOrderInfoVariable" query="/ns4:orderInfoVOSDO/ns4:CardTypeCode" /><to variable="lCreditCardInput" part="Authorization" query="/ns8:AuthInformation/ns8:CCType" /></copy><copy><from variable="gOrderInfoVariable" query="/ns4:orderInfoVOSDO/ns4:AccountNumber" /><to variable="lCreditCardInput" part="Authorization" query="/ns8:AuthInformation/ns8:CCNumber" /></copy></assign><assign name="a4bpAfterAssign_CreditCheckInput"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeAssign_CreditCheckInput" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeInvokeCheckCreditCard"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/invoke&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeInvokeCheckCreditCard" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><invoke name="InvokeCheckCreditCard" inputVariable="lCreditCardInput" outputVariable="lCreditCardOutput" partnerLink="CreditCardAuthorizationService" portType="ns2:CreditAuthorizationPort" operation="AuthorizeCredit" /><assign name="a4bpAfterInvokeCheckCreditCard"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/invoke&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeInvokeCheckCreditCard" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></sequence><assign name="a4bpAfter"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvoke" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></scope><assign name="a4bpAfterScope_AuthorizeCreditCard"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_AuthorizeCreditCard" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeScope_CheckApprovalLimit"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_CheckApprovalLimit" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><scope name="Scope_CheckApprovalLimit"><assign name="a4bpBefore"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvoke" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><sequence><assign name="a4bpBeforeAssign_DefaultNotRequiresApproval"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeAssign_DefaultNotRequiresApproval" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="Assign_DefaultNotRequiresApproval"><copy><from expression="string('false')" /><to variable="lOrderApproved" /></copy></assign><assign name="a4bpAfterAssign_DefaultNotRequiresApproval"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeAssign_DefaultNotRequiresApproval" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeBusinessRule_ApprovalRequired"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/scope&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeBusinessRule_ApprovalRequired" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><scope name="BusinessRule_ApprovalRequired"><assign name="a4bpBeforeSequence_1"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/scope/sequence&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeSequence_1" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><sequence name="Sequence_1"><assign name="a4bpBeforeBPEL_Var_To_Rule_Facts"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeBPEL_Var_To_Rule_Facts" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="BPEL_Var_To_Rule_Facts"><copy><from variable="gOrderInfoVariable" query="/ns4:orderInfoVOSDO/ns4:OrderTotal" /><to variable="com_example_globalcompany_ns_orderbookingservice_rules_Approve_i" query="/ns10:approve/ns10:price" /></copy><copy><from variable="lOrderApproved" /><to variable="com_example_globalcompany_ns_orderbookingservice_rules_Approve_i" query="/ns10:approve/ns10:approvalRequired" /></copy></assign><assign name="a4bpAfterBPEL_Var_To_Rule_Facts"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeBPEL_Var_To_Rule_Facts" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeFacts_To_Rule_Service"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeFacts_To_Rule_Service" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="Facts_To_Rule_Service"><copy><from variable="com_example_globalcompany_ns_orderbookingservice_rules_Approve_i" /><to variable="dsIn" part="payload" query="/ns11:callFunctionStateless/ns11:parameterList/ns10:approve" /></copy></assign><assign name="a4bpAfterFacts_To_Rule_Service"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeFacts_To_Rule_Service" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeBPEL_Header"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeBPEL_Header" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="BPEL_Header"><copy><from expression="'OracleRules1_DecisionService_1'" /><to variable="dsIn" part="payload" query="/ns11:callFunctionStateless/@name" /></copy></assign><assign name="a4bpAfterBPEL_Header"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeBPEL_Header" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeInvoke"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/scope/sequence/invoke&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeInvoke" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><invoke name="Invoke" partnerLink="RequiresApprovalRule_OracleRules1_DecisionService_1" portType="ns11:IDecisionService" operation="callFunctionStateless" inputVariable="dsIn" outputVariable="dsOut" /><assign name="a4bpAfterInvoke"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/scope/sequence/invoke&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeInvoke" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeRule_Service_To_Facts"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeRule_Service_To_Facts" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="Rule_Service_To_Facts"><copy><from variable="dsOut" part="payload" query="/ns11:callFunctionStatelessDecision/ns11:resultList/ns10:approve" /><to variable="com_example_globalcompany_ns_orderbookingservice_rules_Approve_o" /></copy></assign><assign name="a4bpAfterRule_Service_To_Facts"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeRule_Service_To_Facts" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeFacts_To_BPEL_Var"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeFacts_To_BPEL_Var" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="Facts_To_BPEL_Var"><copy><from variable="com_example_globalcompany_ns_orderbookingservice_rules_Approve_o" query="/ns10:approve/ns10:approvalRequired" /><to variable="lOrderApproved" /></copy></assign><assign name="a4bpAfterFacts_To_BPEL_Var"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeFacts_To_BPEL_Var" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></sequence><assign name="a4bpAfterSequence_1"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/scope/sequence&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeSequence_1" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></scope><assign name="a4bpAfterBusinessRule_ApprovalRequired"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/scope&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeBusinessRule_ApprovalRequired" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></sequence><assign name="a4bpAfter"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvoke" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></scope><assign name="a4bpAfterScope_CheckApprovalLimit"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_CheckApprovalLimit" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeScope_RetrieveQuotes"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_RetrieveQuotes" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><scope name="Scope_RetrieveQuotes"><assign name="a4bpBeforeRetrieve_QuotesFromSuppliers"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeRetrieve_QuotesFromSuppliers" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><flow name="Retrieve_QuotesFromSuppliers"><assign name="a4bpBeforeSequence_4"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeSequence_4" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><sequence name="Sequence_4"><assign name="a4bpBeforeAssign_InternalWarehouseRequest"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeAssign_InternalWarehouseRequest" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="Assign_InternalWarehouseRequest"><copy><from variable="gOrderInfoVariable" query="/ns4:orderInfoVOSDO/ns4:OrderId" /><to variable="lInternalWarehouseInputVariable" part="payload" query="/ns1:WarehouseRequest/ns1:orderId" /></copy></assign><assign name="a4bpAfterAssign_InternalWarehouseRequest"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeAssign_InternalWarehouseRequest" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeInvoke_InternalWarehouse"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence/invoke&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeInvoke_InternalWarehouse" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><invoke name="Invoke_InternalWarehouse" inputVariable="lInternalWarehouseInputVariable" partnerLink="InternalWarehouseService" portType="ns1:InternalWarehouseService" operation="process" /><assign name="a4bpAfterInvoke_InternalWarehouse"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence/invoke&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeInvoke_InternalWarehouse" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><receive name="Receive_InternalWarehouse" createInstance="no" variable="lInternalWarehouseResponseVariable" partnerLink="InternalWarehouseService" portType="ns1:InternalWarehouseServiceCallback" operation="processResponse" /><assign validate="no" name="InitializeA4BPVariables"><copy><from><literal><ns:a4bpRes xmlns:ns="http://a4bp.com/instrumentationService"><ns:return>ns:return</ns:return></ns:a4bpRes></literal></from><to variable="a4bpOutInstrumentation" part="parameters" /></copy><copy><from><literal><ns:a4bpReq xmlns:ns="http://a4bp.com/instrumentationService"><ns:request>ns:request</ns:request></ns:a4bpReq></literal></from><to variable="a4bpInInstrumentation" part="parameters" /></copy></assign><assign name="a4bpAfterReceive_InternalWarehouse"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence/receive&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeReceive_InternalWarehouse" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeAssign_InterWHResponse"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeAssign_InterWHResponse" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="Assign_InterWHResponse"><bpelx:append><bpelx:from variable="lInternalWarehouseResponseVariable" part="payload" query="/ns1:WarehouseResponse" /><bpelx:to variable="gWarehouseQuotes" query="/ns1:WarehouseList" /></bpelx:append></assign><assign name="a4bpAfterAssign_InterWHResponse"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeAssign_InterWHResponse" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></sequence><assign name="a4bpAfterSequence_4"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeSequence_4" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeSequence_4"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeSequence_4" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><sequence name="Sequence_4"><assign name="a4bpBeforeAssign_PartnerRequest"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeAssign_PartnerRequest" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="Assign_PartnerRequest"><copy><from variable="gOrderInfoVariable" query="/ns4:orderInfoVOSDO" /><to variable="lPartnerSupplierInputVariable" part="request" query="/ns4:orderInfoVOSDO" /></copy></assign><assign name="a4bpAfterAssign_PartnerRequest"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeAssign_PartnerRequest" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeInvoke_PartnerSupplier"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence/invoke&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeInvoke_PartnerSupplier" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><invoke name="Invoke_PartnerSupplier" partnerLink="PartnerSupplierMediator" portType="ns15:execute_ptt" operation="execute" inputVariable="lPartnerSupplierInputVariable" /><assign name="a4bpAfterInvoke_PartnerSupplier"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence/invoke&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeInvoke_PartnerSupplier" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><receive name="Receive_PartnerResponse" createInstance="no" variable="lPartnerResponseVariable" partnerLink="PartnerSupplierMediator" portType="ns15:callback_ptt" operation="callback" /><assign validate="no" name="InitializeA4BPVariables"><copy><from><literal><ns:a4bpRes xmlns:ns="http://a4bp.com/instrumentationService"><ns:return>ns:return</ns:return></ns:a4bpRes></literal></from><to variable="a4bpOutInstrumentation" part="parameters" /></copy><copy><from><literal><ns:a4bpReq xmlns:ns="http://a4bp.com/instrumentationService"><ns:request>ns:request</ns:request></ns:a4bpReq></literal></from><to variable="a4bpInInstrumentation" part="parameters" /></copy></assign><assign name="a4bpAfterReceive_PartnerResponse"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence/receive&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeReceive_PartnerResponse" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeAssign_PartnerWHResponse"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeAssign_PartnerWHResponse" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="Assign_PartnerWHResponse"><bpelx:append><bpelx:from variable="lPartnerResponseVariable" part="callback" query="/ns1:WarehouseResponse" /><bpelx:to variable="gWarehouseQuotes" query="/ns1:WarehouseList" /></bpelx:append></assign><assign name="a4bpAfterAssign_PartnerWHResponse"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeAssign_PartnerWHResponse" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></sequence><assign name="a4bpAfterSequence_4"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow/sequence&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeSequence_4" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></flow><assign name="a4bpAfterRetrieve_QuotesFromSuppliers"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/flow&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeRetrieve_QuotesFromSuppliers" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></scope><assign name="a4bpAfterScope_RetrieveQuotes"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_RetrieveQuotes" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeScope_SelectPreferredSupplier"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_SelectPreferredSupplier" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><scope name="Scope_SelectPreferredSupplier"><assign name="a4bpBeforeBusinessRule_SelectPreferredSupplier"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeBusinessRule_SelectPreferredSupplier" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><scope name="BusinessRule_SelectPreferredSupplier"><assign name="a4bpBeforeSequence_6"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeSequence_6" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><sequence name="Sequence_6"><assign name="a4bpBeforeBPEL_Var_To_Rule_Facts"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeBPEL_Var_To_Rule_Facts" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="BPEL_Var_To_Rule_Facts"><copy><from variable="gWarehouseQuotes" query="/ns1:WarehouseList" /><to variable="com_example_globalcompany_ns_internalwarehouse_WarehouseList_i" query="/ns1:WarehouseList" /></copy></assign><assign name="a4bpAfterBPEL_Var_To_Rule_Facts"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeBPEL_Var_To_Rule_Facts" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeFacts_To_Rule_Service"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeFacts_To_Rule_Service" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="Facts_To_Rule_Service"><copy><from variable="com_example_globalcompany_ns_internalwarehouse_WarehouseList_i" /><to variable="dsIn" part="payload" query="/ns19:callFunctionStateless/ns19:parameterList/ns1:WarehouseList" /></copy></assign><assign name="a4bpAfterFacts_To_Rule_Service"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeFacts_To_Rule_Service" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeBPEL_Header"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeBPEL_Header" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="BPEL_Header"><copy><from expression="'OracleRules1_DecisionService_1'" /><to variable="dsIn" part="payload" query="/ns19:callFunctionStateless/@name" /></copy></assign><assign name="a4bpAfterBPEL_Header"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeBPEL_Header" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeInvoke"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence/invoke&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeInvoke" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><invoke name="Invoke" partnerLink="EvaluatePreferredSupplierRule.OracleRules1_DecisionService_1" portType="ns19:IDecisionService" operation="callFunctionStateless" inputVariable="dsIn" outputVariable="dsOut" /><assign name="a4bpAfterInvoke"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence/invoke&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeInvoke" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeRule_Service_To_Facts"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeRule_Service_To_Facts" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="Rule_Service_To_Facts"><copy><from variable="dsOut" part="payload" query="/ns19:callFunctionStatelessDecision/ns19:resultList/ns1:WarehouseResponse" /><to variable="com_example_globalcompany_ns_internalwarehouse_WarehouseResponse_o" /></copy></assign><assign name="a4bpAfterRule_Service_To_Facts"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeRule_Service_To_Facts" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeFacts_To_BPEL_Var"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeFacts_To_BPEL_Var" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="Facts_To_BPEL_Var"><copy><from variable="com_example_globalcompany_ns_internalwarehouse_WarehouseResponse_o" query="/ns1:WarehouseResponse" /><to variable="gPreferredSupplier" query="/ns1:WarehouseResponse" /></copy></assign><assign name="a4bpAfterFacts_To_BPEL_Var"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeFacts_To_BPEL_Var" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></sequence><assign name="a4bpAfterSequence_6"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeSequence_6" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></scope><assign name="a4bpAfterBusinessRule_SelectPreferredSupplier"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeBusinessRule_SelectPreferredSupplier" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></scope><assign name="a4bpAfterScope_SelectPreferredSupplier"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_SelectPreferredSupplier" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeScope_FulfillOrder"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_FulfillOrder" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><scope name="Scope_FulfillOrder"><assign name="a4bpBefore"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvoke" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><sequence><assign name="a4bpBeforeAssign_OrderData"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeAssign_OrderData" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="Assign_OrderData"><copy><from variable="gOrderInfoVariable" query="/ns4:orderInfoVOSDO" /><to variable="lFulfillOrder_InputVariable" part="request" query="/ns4:orderInfoVOSDO" /></copy></assign><assign name="a4bpAfterAssign_OrderData"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeAssign_OrderData" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeInvoke_FulfillOrder"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/invoke&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeInvoke_FulfillOrder" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><invoke name="Invoke_FulfillOrder" inputVariable="lFulfillOrder_InputVariable" partnerLink="FulfillOrder.FulfillOrder" portType="ns17:execute_ptt" operation="execute" /><assign name="a4bpAfterInvoke_FulfillOrder"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence/invoke&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeInvoke_FulfillOrder" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></sequence><assign name="a4bpAfter"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/sequence&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvoke" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></scope><assign name="a4bpAfterScope_FulfillOrder"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_FulfillOrder" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeScope_UpdateStatusToComplete"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_UpdateStatusToComplete" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><scope name="Scope_UpdateStatusToComplete"><assign name="a4bpBeforeUpdateOrderStatus"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeUpdateOrderStatus" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="UpdateOrderStatus"><copy><from expression="string('complete')" /><to variable="gOrderInfoVariable" query="/ns4:orderInfoVOSDO/ns4:OrderStatusCode" /></copy><copy xml:id="id1"><from xml:id="id2" variable="inputVariable" part="payload" query="/client:process/client:orderId" /><to xml:id="id3" variable="outputVariable" part="payload" query="/client:processResponse/client:result" /></copy></assign><assign name="a4bpAfterUpdateOrderStatus"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeUpdateOrderStatus" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></scope><assign name="a4bpAfterScope_UpdateStatusToComplete"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_UpdateStatusToComplete" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeScope_NotifyCustomerOfCompletion"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_NotifyCustomerOfCompletion" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><scope name="Scope_NotifyCustomerOfCompletion"><assign name="a4bpBeforeEmail_ConfirmationToCustomer"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeEmail_ConfirmationToCustomer" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><scope name="Email_ConfirmationToCustomer"><assign name="a4bpBeforeSequence_5"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeSequence_5" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><sequence name="Sequence_5"><assign name="a4bpBeforeEmailParamsAssign"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeEmailParamsAssign" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="EmailParamsAssign"><copy><from expression="string('Default')" /><to variable="varNotificationReq" part="EmailPayload" query="/EmailPayload/ns18:FromAccountName" /></copy><copy><from expression="string('')" /><to variable="varNotificationReq" part="EmailPayload" query="/EmailPayload/ns18:Bcc" /></copy><copy><from expression="string('')" /><to variable="varNotificationReq" part="EmailPayload" query="/EmailPayload/ns18:Cc" /></copy><copy><from expression="string('')" /><to variable="varNotificationReq" part="EmailPayload" query="/EmailPayload/ns18:ReplyToAddress" /></copy><copy><from expression="concat(string('Order with id '), bpws:getVariableData('gOrderInfoVariable','/ns4:orderInfoVOSDO/ns4:OrderId'), string(' shipped!'))" /><to variable="varNotificationReq" part="EmailPayload" query="/EmailPayload/ns18:Subject" /></copy><copy><from expression="bpws:getVariableData('gCustomerInfoVariable','parameters','/ns6:findCustomerInfoVO1CustomerInfoVOCriteriaResponse/ns6:result/ns4:ConfirmedEmail')" /><to variable="varNotificationReq" part="EmailPayload" query="/EmailPayload/ns18:To" /></copy><copy><from expression="concat(string('Dear '), bpws:getVariableData('gCustomerInfoVariable','parameters','/ns6:findCustomerInfoVO1CustomerInfoVOCriteriaResponse/ns6:result/ns4:FirstName') , string(', your order has been shipped.'))" /><to variable="varNotificationReq" part="EmailPayload" query="/EmailPayload/ns18:Content/ns18:ContentBody" /></copy><copy><from expression="string('text/html; charset=UTF-8')" /><to variable="varNotificationReq" part="EmailPayload" query="/EmailPayload/ns18:Content/ns18:MimeType" /></copy></assign><assign name="a4bpAfterEmailParamsAssign"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence/assign&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeEmailParamsAssign" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforeInvokeNotificationService"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence/invoke&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeInvokeNotificationService" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><invoke name="InvokeNotificationService" portType="ns18:NotificationService" partnerLink="NotificationService_WSDL" inputVariable="varNotificationReq" outputVariable="varNotificationResponse" operation="sendEmailNotification" /><assign name="a4bpAfterInvokeNotificationService"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence/invoke&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeInvokeNotificationService" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></sequence><assign name="a4bpAfterSequence_5"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope/sequence&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeSequence_5" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></scope><assign name="a4bpAfterEmail_ConfirmationToCustomer"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope/scope&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeEmail_ConfirmationToCustomer" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></scope><assign name="a4bpAfterScope_NotifyCustomerOfCompletion"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/scope&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokeScope_NotifyCustomerOfCompletion" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><assign name="a4bpBeforecallbackClient"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/invoke&lt;/xPath&gt;&lt;event&gt;Before&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokecallbackClient" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /><invoke name="callbackClient" partnerLink="orderprocessor_client_ep" portType="client:OrderProcessorCallback" operation="processResponse" inputVariable="outputVariable" /><assign name="a4bpAftercallbackClient"><copy><from expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">&quot;&lt;activitiy&gt;&lt;processName&gt;OrderProcessor&lt;/processName&gt;&lt;xPath&gt;/process/sequence/invoke&lt;/xPath&gt;&lt;event&gt;After&lt;/event&gt;&lt;/activitiy&gt;&quot;</from><to part="parameters" variable="a4bpInInstrumentation"><query queryLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">a4bp:request</query></to></copy></assign><invoke name="a4bpAfterInvokecallbackClient" partnerLink="a4bpIntegration" portType="a4bp:A4bpInstrServicePortType" operation="instrumentation" inputVariable="a4bpInInstrumentation" outputVariable="a4bpOutInstrumentation" /></sequence></process>