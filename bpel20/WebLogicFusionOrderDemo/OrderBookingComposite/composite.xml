<?xml version="1.0" encoding="UTF-8" ?>
<!-- Generated by Oracle SOA Modeler version 1.0 at [9/12/08 2:17 PM]. -->
<composite name="OrderBookingComposite"
           revision="1.0"
           label="2008-09-12_14-17-25_625"
           mode="active"
           state="on"
           xmlns="http://xmlns.oracle.com/sca/1.0"
           xmlns:xs="http://www.w3.org/2001/XMLSchema"
           xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy"
           xmlns:orawsp="http://schemas.oracle.com/ws/2006/01/policy"
           xmlns:ui="http://xmlns.oracle.com/soa/designer/">
  <import namespace="http://www.globalcompany.example.com/ns/OrderBookingService"
          location="OrderProcessor.wsdl" importType="wsdl"/>
  <import namespace="http://xmlns.oracle.com/RequiresApprovalRule/OracleRules1_DecisionService_1"
          location="RequiresApprovalRule_OracleRules1_DecisionService_1.wsdl" importType="wsdl"/>
  <import namespace="http://www.globalcompany.example.com/ns/InternalWarehouse"
          location="InternalWarehouseService.wsdl" importType="wsdl"/>
  <import namespace="http://www.partnersupplier.example.com/ns/warehouse"
          location="services/partnersupplier/PartnerSupplierComposite.wsdl"
          importType="wsdl"/>
  <import namespace="www.globalcompany.example.com"
          location="services/oracle/fodemo/storefront/store/service/common/serviceinterface/StoreFrontService.wsdl"
          importType="wsdl"/>
  <import namespace="http://xmlns.oracle.com/bpel/workflow/taskService"
          location="oramds:/soa/shared/workflow/TaskServiceInterface.wsdl"
          importType="wsdl"/>
  <import namespace="http://xmlns.oracle.com/WebLogicFusionOrderDemo/OrderBookingComposite/PartnerSupplierMediator"
          location="PartnerSupplierMediator.wsdl" importType="wsdl"/>
  <import namespace="http://xmlns.oracle.com/pcbpel/adapter/jms/WebLogicFusionOrderDemo/OrderBookingComposite/FulfillmentBatch/"
          location="FulfillmentBatch.wsdl" importType="wsdl"/>
  <import namespace="http://xmlns.oracle.com/pcbpel/adapter/file/WebLogicFusionOrderDemo/OrderBookingComposite/USPSShipment/"
          location="USPSShipment.wsdl" importType="wsdl"/>
  <import namespace="http://xmlns.oracle.com/WebLogicFusionOrderDemo/OrderBookingComposite/FulfillOrder"
          location="FulfillOrder.wsdl" importType="wsdl"/>
  <import namespace="http://xmlns.oracle.com/ias/pcbpel/NotificationService"
          location="oramds:/soa/shared/workflow/NotificationService.wsdl" importType="wsdl"/>
  <import namespace="http://www.globalcompany.example.com/ns/CreditAuthorizationService"
          location="CreditCardAuthorizationService.wsdl" importType="wsdl"/>
  <import namespace="www.globalcompany.example.com"
          location="StoreFrontServiceRef.wsdl" importType="wsdl"/>
  <import namespace="http://xmlns.oracle.com/WebLogicFusionOrderDemo/OrderBookingComposite/PartnerSupplierMediator"
          location="PartnerSupplierMediatorRef.wsdl" importType="wsdl"/>
  <import namespace="http://xmlns.oracle.com/WebLogicFusionOrderDemo/OrderBookingComposite/FulfillOrder"
          location="FulfillOrderRef.wsdl" importType="wsdl"/>
  <import namespace="http://xmlns.oracle.com/EvaluatePreferredSupplierRule/OracleRules1_DecisionService_1"
          location="EvaluatePreferredSupplierRule_OracleRules1_DecisionService_1.wsdl" importType="wsdl"/>
  <import namespace="http://schemas.oracle.com/events/edl/OrderEventsDefinition"
          location="OrderEventsDefinition.edl" importType="edl"/>
  <import namespace="http://xmlns.oracle.com/WebLogicFusionOrderDemo/OrderBookingComposite/UpdateOrderStatus"
          location="UpdateOrderStatus.wsdl" importType="wsdl"/>
  <import namespace="/oracle/fodemo/storefront/entities/events/edl/OrderEO"
          location="services/oracle/fodemo/storefront/entities/events/OrderEO.edl"
          importType="edl"/>
  <service name="orderprocessor_client_ep"
           ui:wsdlLocation="OrderProcessor.wsdl">
    <interface.wsdl interface="http://www.globalcompany.example.com/ns/OrderBookingService#wsdl.interface(OrderProcessor)"
                    callbackInterface="http://www.globalcompany.example.com/ns/OrderBookingService#wsdl.interface(OrderProcessorCallback)"/>
    <binding.ws port="http://www.globalcompany.example.com/ns/OrderBookingService#wsdl.endpoint(orderprocessor_client_ep/OrderProcessor_pt)"/>
    <callback>
      <binding.ws port="http://www.globalcompany.example.com/ns/OrderBookingService#wsdl.endpoint(orderprocessor_client_ep/OrderProcessorCallback_pt)"/>
    </callback>
  </service>
  <service name="UpdateOrderStatus_ep" ui:wsdlLocation="UpdateOrderStatus.wsdl">
    <interface.wsdl interface="http://xmlns.oracle.com/WebLogicFusionOrderDemo/OrderBookingComposite/UpdateOrderStatus#wsdl.interface(execute_ptt)"/>
    <binding.ws port="http://xmlns.oracle.com/WebLogicFusionOrderDemo/OrderBookingComposite/UpdateOrderStatus#wsdl.endpoint(UpdateOrderStatus_ep/execute_pt)"/>
  </service>
  <component name="OrderProcessor">
    <implementation.bpel src="OrderProcessor.bpel"/>
  </component>
  <component name="RequiresApprovalRule">
    <implementation.decision src="RequiresApprovalRule.decs"/>
  </component>
  <component name="InternalWarehouseService">
    <implementation.bpel src="InternalWarehouseService.bpel"/>
  </component>
  <component name="ApprovalHumanTask">
    <implementation.workflow src="ApprovalHumanTask.task"/>
    <business-events>
      <publishes xmlns:pub1="http://xmlns.oracle.com/bpel/workflow/taskEvent"
                 name="pub1:OnTaskAssigned"/>
    </business-events>    
  </component>
  <component name="PartnerSupplierMediator">
    <implementation.mediator src="PartnerSupplierMediator.mplan"/>
  </component>
  <component name="OrderPendingEvent">
    <implementation.mediator src="OrderPendingEvent.mplan"/>
    <business-events>
      <subscribe xmlns:sub1="/oracle/fodemo/storefront/entities/events/edl/OrderEO"
                 name="sub1:NewOrderSubmitted" consistency="oneAndOnlyOne"
                 runAsRoles="$publisher"/>
      <publishes xmlns:pub1="/oracle/fodemo/storefront/entities/events/edl/OrderEO"
                 name="pub1:OrderCompleted"/>
    </business-events>
  </component>
  <component name="FulfillOrder">
    <implementation.mediator src="FulfillOrder.mplan"/>
  </component>
  <component name="EvaluatePreferredSupplierRule">
    <implementation.decision src="EvaluatePreferredSupplierRule.decs"/>
  </component>
  <component name="OrderUpdateEventMediator">
    <implementation.mediator src="OrderUpdateEventMediator.mplan"/>
    <business-events>
      <subscribe xmlns:sub1="http://schemas.oracle.com/events/edl/OrderEventsDefinition"
                 name="sub1:OrderUpdateEvent" consistency="oneAndOnlyOne"
                 runAsRoles="$publisher"/>
    </business-events>
  </component>
  <component name="UpdateOrderStatus">
    <implementation.mediator src="UpdateOrderStatus.mplan"/>
    <business-events>
      <publishes xmlns:pub1="http://schemas.oracle.com/events/edl/OrderEventsDefinition"
                 name="pub1:OrderUpdateEvent"/>
    </business-events>
  </component>
  <reference name="PartnerSupplierService"
             ui:wsdlLocation="services/partnersupplier/PartnerSupplierComposite.wsdl">
    <interface.wsdl interface="http://www.partnersupplier.example.com/ns/warehouse#wsdl.interface(ExternalPartnerSupplier)"
                    callbackInterface="http://www.partnersupplier.example.com/ns/warehouse#wsdl.interface(ExternalPartnerSupplierCallback)"/>
    <binding.ws port="http://www.partnersupplier.example.com/ns/warehouse#wsdl.endpoint(externalpartnersupplier_client_ep/ExternalPartnerSupplier_pt)"
                location="services/partnersupplier/PartnerSupplierComposite.wsdl"/>
  </reference>
  <reference name="CreditCardAuthorizationService"
             ui:wsdlLocation="services/creditAuthorization/CreditAuthorizationService.wsdl">
    <interface.wsdl interface="http://www.globalcompany.example.com/ns/CreditAuthorizationService#wsdl.interface(CreditAuthorizationPort)"/>
    <binding.ws port="http://www.globalcompany.example.com/ns/CreditAuthorizationService#wsdl.endpoint(CreditAuthorizationService/CreditAuthorizationPort)"
                location="services/creditAuthorization/CreditAuthorizationService.wsdl"/>
  </reference>
  <reference name="StoreFrontService"
             ui:wsdlLocation="services/oracle/fodemo/storefront/store/service/common/serviceinterface/StoreFrontService.wsdl">
    <interface.wsdl interface="www.globalcompany.example.com#wsdl.interface(StoreFrontService)"/>
    <binding.ws port="www.globalcompany.example.com#wsdl.endpoint(StoreFrontService/StoreFrontServiceSoapHttpPort)"
                location="services/oracle/fodemo/storefront/store/service/common/serviceinterface/StoreFrontService.wsdl"/>
  </reference>
  <reference name="FulfillmentBatch" ui:wsdlLocation="FulfillmentBatch.wsdl">
    <interface.wsdl interface="http://xmlns.oracle.com/pcbpel/adapter/jms/WebLogicFusionOrderDemo/OrderBookingComposite/FulfillmentBatch/#wsdl.interface(Produce_Message_ptt)"/>
    <binding.jca config="FulfillmentBatch_jms.jca"/>
  </reference>
  <reference name="USPSShipment" ui:wsdlLocation="USPSShipment.wsdl">
    <interface.wsdl interface="http://xmlns.oracle.com/pcbpel/adapter/file/WebLogicFusionOrderDemo/OrderBookingComposite/USPSShipment/#wsdl.interface(Write_ptt)"/>
    <binding.jca config="USPSShipment_file.jca"/>
  </reference>
  <reference name="NotificationService_1"
             ui:wsdlLocation="oramds:/soa/shared/workflow/NotificationService.wsdl">
    <interface.wsdl interface="http://xmlns.oracle.com/ias/pcbpel/NotificationService#wsdl.interface(NotificationService)"/>
    <binding.wsif port="http://xmlns.oracle.com/ias/pcbpel/NotificationService#wsdl.endpoint(NotificationService/JavaPort)"
                  location="oramds:/soa/shared/workflow/NotificationService.wsdl"/>
  </reference>
  <wire>
    <source.uri>PartnerSupplierMediator/PartnerSupplierService</source.uri>
    <target.uri>PartnerSupplierService</target.uri>
  </wire>
  <wire>
    <source.uri>FulfillOrder/USPSShipment</source.uri>
    <target.uri>USPSShipment</target.uri>
  </wire>
  <wire>
    <source.uri>FulfillOrder/FulfillmentBatch</source.uri>
    <target.uri>FulfillmentBatch</target.uri>
  </wire>
  <wire>
    <source.uri>OrderProcessor/RequiresApprovalRule_OracleRules1_DecisionService_1</source.uri>
    <target.uri>RequiresApprovalRule/OracleRules1_DecisionService_1</target.uri>
  </wire>
  <wire>
    <source.uri>OrderProcessor/InternalWarehouseService</source.uri>
    <target.uri>InternalWarehouseService/internalwarehouseservice_client</target.uri>
  </wire>
  <wire>
    <source.uri>OrderProcessor/TaskService</source.uri>
    <target.uri>ApprovalHumanTask/TaskService</target.uri>
  </wire>
  <wire>
    <source.uri>OrderProcessor/PartnerSupplierMediator</source.uri>
    <target.uri>PartnerSupplierMediator/PartnerSupplierMediator</target.uri>
  </wire>
  <wire>
    <source.uri>orderprocessor_client_ep</source.uri>
    <target.uri>OrderProcessor/orderprocessor_client_ep</target.uri>
  </wire>
  <wire>
    <source.uri>OrderProcessor/CreditCardAuthorizationService</source.uri>
    <target.uri>CreditCardAuthorizationService</target.uri>
  </wire>
  <wire>
    <source.uri>OrderProcessor/StoreFrontService</source.uri>
    <target.uri>StoreFrontService</target.uri>
  </wire>
  <wire>
    <source.uri>OrderProcessor/NotificationService_WSDL</source.uri>
    <target.uri>NotificationService_1</target.uri>
  </wire>
  <wire>
    <source.uri>OrderProcessor/FulfillOrder.FulfillOrder</source.uri>
    <target.uri>FulfillOrder/FulfillOrder</target.uri>
  </wire>
  <wire>
    <source.uri>OrderProcessor/EvaluatePreferredSupplierRule.OracleRules1_DecisionService_1</source.uri>
    <target.uri>EvaluatePreferredSupplierRule/OracleRules1_DecisionService_1</target.uri>
  </wire>
  <wire>
    <source.uri>OrderUpdateEventMediator/StoreFrontService</source.uri>
    <target.uri>StoreFrontService</target.uri>
  </wire>
  <wire>
    <source.uri>UpdateOrderStatus_ep</source.uri>
    <target.uri>UpdateOrderStatus/UpdateOrderStatus</target.uri>
  </wire>
  <wire>
    <source.uri>OrderPendingEvent/OrderProcessor.orderprocessor_client_ep</source.uri>
    <target.uri>OrderProcessor/orderprocessor_client_ep</target.uri>
  </wire>
</composite>
